[
  {
    "category_name": "Livelihoods, Production Systems & Ecosystems",
    "category_slug": "Livelihoods_production_systems_ecosystems",
    "indicators": [
      {
        "name": "Total population",
        "slug": "total_population",
        "widget": "number",
        "query": "SELECT to_char(pop, '999G999G999G999') as value FROM grp_totalpop_density1 where iso3= '%1'"
      },    
      {
        "name": "Population density",
        "slug": "population_density",
        "widget": "number",
        "query": "SELECT round(pop_densit::numeric,2) as value ,'p/km2' as unit FROM grp_totalpop_density1 where iso3= '%1'"
      },
      {
        "name": "Primary livelihood strategies",
        "slug": "primary_livelihood_strategies",
        "widget": "text_list",
        "query": "SELECT lz_type as category,area_rank as rank FROM grp_lzs_area where iso3= '%1' order by area_rank asc"
      }
    ]
  },
  {
    "category_name": "Stressors & Shocks",
    "category_slug": "stressors_shocks",
    "indicators": [
      {
        "name": "Monthly precipitation",
        "slug": "monthly_precipitation",
        "widget": "line_chart",
        "unit": "mm",
        "query": "SELECT month as x, round(precip::numeric, 2) as y, month as name FROM monthly_mean_precip_1981_2014 WHERE iso3 = '%1'"
      },
      {
        "name": "Mean temperatures (current)",
        "slug": "mean_temperatures_current",
        "widget": "line_chart",
        "unit": "째C",
        "query": "SELECT month as x,month as name, round(value::numeric,1) as y  FROM cru_ts3_23_tmp_1985_2015_monthly WHERE iso3 ='%1'"
      },
      {
        "name": "Mean temperatures (2040-2060) (max temperature trend)",
        "slug": "temperature_trend_max",
        "widget": "bar_chart",
        "unit": "째C",
        "query": "SELECT round(change::numeric,2) as y, month as x, month as name FROM tasmax_rcp85_1986_2005_vs_2040_2059_monthly where iso3='%1'"
      },
      {
        "name": "Mean temperatures (2040-2060) (min temperature trend)",
        "slug": "temperature_trend_min",
        "widget": "bar_chart",
        "unit": "째C",
        "query": "SELECT round(change::numeric,2) as y, month as x, month as name FROM tasmin_rcp85_1986_2005_vs_2040_2059_monthly where iso3='%1'"
      },
      {
        "name": "Climate chart",
        "slug": "climate_chart",
        "widget": "bar_line_chart",
        "unit": "mm",
        "unitZ": "째C",
        "query": "with r as (SELECT s.month as x,s.month as name, round(value::numeric,1) as z, round(precip::numeric,1) as y, r.iso3  FROM cru_ts3_23_tmp_1985_2015_monthly r inner join monthly_mean_precip_1981_2014 s on r.iso3=s.iso3 and r.month=s.month) select * from r where iso3='%1'"
      },
      {
        "name": "Monthly precipitation in 2040-2060",
        "slug": "monthly_precipitation_in_2040",
        "widget": "bar_chart",
        "unit": "%",
        "query": "SELECT round(change::numeric,2) as y, month as x, month as name FROM pr_rcp85_1986_2005_vs_2040_2059_monthly where iso3='%1'"
      },
      {
        "name": "Conflict",
        "slug": "conflict",
        "widget": "group_bar_chart",
        "query": "SELECT overall::float, inco::float, inst::float, army::float, year as x FROM gpi_scores_longformat where iso3='%1' order by year asc",
        "labels": {
          "overall": "Graphic showing State of Peace",
          "inco": "Society and Security",
          "inst": "Domestic and International Conflict",
          "army": "Militarisation"
        }
      }
    ]
  },
  {
    "category_name": "Vulnerability",
    "category_slug": "vulnerability",
    "indicators": [
      {
        "name": "Population pyramid",
        "slug": "population_pyramid",
        "widget": "pyramid_chart",
        "query": "SELECT round(pop::numeric,2) as value , sex as category, to_char(class,'FM99') as group FROM africa_pop_pyramid_tables where iso3= '%1' order by class,sex",
        "labels": {
          "14":"0-5",
          "13":"5-10",
          "12":"10-15",
          "11":"15-20",
          "10":"20-25",
          "9":"25-30",
          "8":"30-35",
          "7":"35-40",
          "6":"40-45",
          "5":"45-50",
          "4":"50-55",
          "3":"55-60",
          "2":"60-65",
          "1":">65"
        }
      },
      {
        "name": "Health",
        "slug": "health",
        "widget": "group_horizontal_bar_chart",
        "query": "with r as (select dhsregen,iso3,reg_id,svytype,svyyear from grp_dhs_regions where iso3='%1'),  s as (SELECT l.indicatorid, l.byvariableid, characteristiclabel, l.value FROM dhs_export l inner join r on regionid=reg_id where indicatorid = 20171000 or indicatorid = 70254002 or indicatorid =13126000 order by characteristiclabel) SELECT trim(leading '.' from characteristiclabel) as label, value, CASE indicatorid WHEN 20171000 THEN 'Total fertility rate' WHEN 70254002 THEN 'infant mortality rate' ELSE 'stunting' END as category FROM s"
      },
      {
        "name": "Education",
        "slug": "education",
        "widget": "group_horizontal_bar_chart",
        "query": "with r as (select dhsregen,iso3,reg_id,svytype,svyyear from grp_dhs_regions where iso3='%1'),  s as (SELECT l.indicatorid, l.byvariableid, characteristiclabel, l.value FROM dhs_export l inner join r on regionid=reg_id where byvariableid!=106001 and indicatorid = 6136002 or indicatorid =13126000 or indicatorid =127384003 order by characteristiclabel) SELECT trim(leading '.' from characteristiclabel) as label, value, CASE indicatorid WHEN 6136002 THEN 'Total fertility rate' WHEN 13126000 THEN 'Womens education' ELSE 'mass media access' END as category FROM s"
      },
      {
        "name": "Services",
        "slug": "services",
        "widget": "group_horizontal_bar_chart",
        "query": "with r as (select dhsregen,iso3,reg_id,svytype,svyyear from grp_dhs_regions where iso3= '%1'),  s as (SELECT l.indicatorid, l.byvariableid, characteristiclabel, l.value FROM dhs_export l inner join r on regionid=reg_id where indicatorid = 9124003 or indicatorid =8139010 or indicatorid =8142001 order by characteristiclabel) SELECT trim(leading '.' from characteristiclabel) as label, value, CASE indicatorid WHEN 9124003 THEN 'Electification access' WHEN 8142001 THEN 'Telephone access' ELSE 'Piped water access' END as category FROM s"
      }
    ]
  }
]